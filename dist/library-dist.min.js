function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _get=function(t,e,n){for(var i=!0;i;){var o=t,r=e,s=n;a=l=c=void 0,i=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,r);if(void 0!==a){if("value"in a)return a.value;var c=a.get;return void 0===c?void 0:c.call(s)}var l=Object.getPrototypeOf(o);if(null===l)return void 0;t=l,e=r,n=s,i=!0}},_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("redis-pubsub"),require("ainojs-ajax"),require("i18n-node")):"function"==typeof define&&define.amd?define(["redis-pubsub","ainojs-ajax","i18n-node"],e):t.TranslationManager=e(t.Redispubsub,t.Ajax,t.i18n)}(this,function(t,e,n){"use strict";var i=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"log",value:function(e){t.log(e)}}]),t}(),o=i,r=function(){function t(e,n,i){_classCallCheck(this,t),this.host=e.railsHost||"127.0.0.1",this.port=e.railsPort||3e3,this.restPath=e.restPath||t.defaultPath,this.storage=e.storage,this.sucessCallback=n,this.failCallback=i,this.load()}return _createClass(t,[{key:"load",value:function(){o.log("Ajax"),e.get(this.request).then(function(t){o.log(t)})["catch"](function(t){o.log(t)})}},{key:"request",get:function(){return"'http://"+this.host+":"+this.port+"/translations?"+this.restPath+"'"}}],[{key:"defaultPath",get:function(){return"/translations"}}]),t}(),s=r,a=function(){function t(e){_classCallCheck(this,t),this.locales=e.locales,this.options=e}return _createClass(t,[{key:"load",value:function(t,e,n){return this.options.restPath="locale="+t,new s(this.options,e,n)}}]),t}(),c=a,l=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"init",value:function(t){n.init(t)}}]),t}(),u=l,h=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"init",value:function(t){_get(Object.getPrototypeOf(e.prototype),"init",this).call(this,this.configurationFor(t))}},{key:"configurationFor",value:function(t){return{resStore:t}}}]),e}(u),f=h,y=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"contructor",value:function(t){this.key=Object.keys(t)[0],this.value=JSON.stringify(t[this.key])}},{key:"locale",get:function(){return localStorage.getItem(this.key)}},{key:"translation",get:function(){return JSON.parse(this.locale)}}]),t}(),p=y,g=function(){function t(e){_classCallCheck(this,t),this.storage=e.storage}return _createClass(t,[{key:"sync",value:function(t){var e=new p(t);(new f).init(e.resource()),this.dataKeys=Object.keys(t)[0],this.storage.save(this.dataKeys,JSON.stringify(t[this.dataKeys]))}}]),t}(),v=g,C=function(){function e(n){_classCallCheck(this,e),this.eventLogger=new o(n),this.translationSynchronizer=new v(n),this.channel=t.createChannel(n.realtimePort||6379,n.realtimeHost||"127.0.0.1",n.channel||"realtime_msg"),this.init()}return _createClass(e,[{key:"init",value:function(){var t=this;this.channel.on("connect",function(){t.channel.on("message",function(e){t.eventLogger.log(e.msg),t.translationSynchronizer.sync(e)})})}}]),e}(),k=C,_=function d(t){_classCallCheck(this,d),this.options=t,t.loader=new c(t||{}),this.eventBus=new k(t)};return _});
//# sourceMappingURL=library-dist.min.js.map